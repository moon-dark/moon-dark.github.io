---
title: 为何有些NFC手机不能读公交卡
date: 2017-11-04 18:28:21
tags:
  - tech
---

NFC (Near Field Communication) 是一种短距离高频无线电技术，在手机上一度非常流行。不过，即使是许多手机都开始支持 NFC 功能，NFC 的主要功能还是限制在帮支持的公交卡充值、以及手机面对面对传之类的简单应用上。可能正因为如此， NFC 在火了一阵子之后沉寂了下来。

## 兼容性

以目前支持最广泛的 NFC 技术 —— 公交卡 为例。为什么有的公交卡可以被 NFC 手机识别甚至充值，有的却不行？ [你的NFC手机为何不能读公交卡？](http://www.leiphone.com/news/201502/LVGgMGoCgSyOYZ74.html) 一文做出了解释：

> 一个完备的NFC产品，应该包括三个部分：NFC硬件、统一的系统接口支持、App。这个结构和蓝牙产品、WiFi产品没啥区别，只是NFC多用于支付领域，所以它的App最好能带支付接口。
>
> 在这三个部分中，都存在不同的方案，各家互相兼容的状况有差异，其中以硬件部分最甚。
>
NFC的硬件部分并不复杂，由CLF（非接前端模块）、射频天线、SE（安全区域）三部分构成。只是读公交卡以及充值，CLF+天线就够了；如果还想把手机App做成电子公交卡（支持空中发卡和空中圈存），那么还需要SE部分。
>
> 前边提的读卡兼容问题，出在CLF的NFC芯片上。目前国内主流的手机NFC芯片供应商有恩智浦、博通、联发科、三星电子，恩智浦为业内份额第一，博通次之，联发科、三星电子更次，其中三星电子的量主要在Note 4这款机型上。
>
> 各家芯片公司在NFC的公开标准上，都会有自己的实现，比如有些更兼容老的标准，有的选用了标准内的不同方法，诸如此类等等。如果不能读卡，基本上可以确认是不同芯片之间实现方法不同所造成的兼容问题。

<!-- more -->

上面提到的 NFC 的 SE 部分，目前有三种技术，它们是：

### eSE、NFC-SIM 和 HCE

Apple Pay 属于 eSE，它将加密信息存储在手机独立的安全芯片里。

NFC-SIM 是有运营商主导的安全方案，也就是常见的各类手机钱包，它将加密信息储存在了 SIM 卡里，因此需要去营业厅更换特制的 SIM 卡才能使用。

银联的云闪付则使用的是 HCE (Host Card Emulation) 方案，它被业内人士视为移动支付的未来趋势。它将加密信息交由银行的云端服务器来处理，不需要手机制造商以及运营商参与。HCE 的优势在于减少了对硬件的依赖，既不需要专门的安全芯片，也不需要专用的 SIM 卡。只要手机的 NFC 设计符合规范，就能方便地进行「刷卡购物」了。

顺便说一句， [Android Pay](https://www.android.com/pay/) 使用的也是 HCE 方案。

对于HCE方案的理解可以参考这篇文章： [HCE方案全面解析：特点、安全及展望](http://www.nfcin.com.cn/news/201409/18193147.html)

从上面的分析可以看出，正是不同的厂商之间的博弈，造成了 NFC 的普及困难。也正是由于芯片厂商、移动设备制造商、电信运营商、银行之间的竞争，造成了 NFC 技术的欣欣向荣。

|   | 	HCE 方案	| SE 方案 |
| :------: | :------: | :------: |
| 手机NFC支持	 | 要求	 | 要求 |
| Android 版本  | 	4.4 以上  | 	2.3 以上 |
| 手机设备硬件	 | 通用设备+普通UIM卡	 | 定制设备+SWP卡 |
| 应用实现	 | 手机客户端APP	 | SE 内的Applet |
| 网络要求	 | 需要联机 | 	支持离线方式 |
| 应用安全性	 | 较高，可以从UIM卡中获取一定信息作为验证 | 	高 |
| POS 终端兼容性	 | 兼容既有空片受理终端	 | 兼容既有空片受理终端 |
| 用户体验	 | 一致，无需换卡	 | 一致，需换卡 |


### 武汉通
[武汉通](http://www.whcst.com/) 是武汉的公交卡，目前已经可以使用 QQ 钱包给武汉通充值 。但是，如果乘车不想刷卡而是希望刷手机的话，还必须换用 [武汉通NFC-SIM卡](http://www.whnfc.com/applyfor.html) 。

最早的武汉通 SIM 卡是这样的：

![](https://blog.zengrong.net/uploads/2016/02/mobile-wht.jpg?raw=true)

SIM 卡插在卡槽中，那个黑色的部分则是 NFC 天线。我当时超级想换一张这样的卡，可是跑了3个营业厅都没货，最终放弃。

根据 手机武汉通 网站的描述，现在的武汉通 SIM 卡貌似不再自带 NFC 天线，而是转而要求手机必须具有 NFC 功能。

从上面的资料看来，武汉通应该采用的是 SE 方案。

详情参见得意生活的帖子： [【武汉通实用帖】不用花钱办公交卡的方法有很多！附办理武汉通手机SIM亲身经历及经验~](http://www.deyi.com/thread-4507315-1-1.html)

### 参考资料

[八一八 Apple Pay 、NFC 和“云闪付”](https://blog.zengrong.net/post/2450.html)
